@model intrapp.Models.ViewModels.SummonerInfo
@{
    ViewBag.Title = "Home Page";
}

<div class="row" style="margin-bottom: 20px;">
    <div class="col-md-12">
        <h2 class="float-left">Summoner information</h2>
        <div id="waiting-div" style="text-align: center; display: none; margin-top: 10px;" class="float-right">
            <span class="loader"><span class="loader-inner"></span></span>
        </div>
    </div>
</div>
<div class="row" style="margin-bottom: 20px;">
    <div class="col-md-1">
        <img src="@Model.ProfileIconUrl" alt="Image unavailable" height="75" width="75" />
    </div>
    <div class="col-md-2">
        <b>@Model.Summoner.Name</b>
    </div>
    <div class="col-md-9" style="border: 1px red solid;">
        League entries here
    </div>
</div>
<hr />
<div class="row">
    <h4>Match history</h4>
</div>
<div class="row">
    <div id="matchHistory">
        @Html.Partial("_MatchHistory", Model.MatchHistory.Matches)
    </div>
    <button id="loadBtn" class="input-link-style">Load more</button>
</div>

@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            var startIndex = @Model.MatchHistory.StartIndex;
            var endIndex = @Model.MatchHistory.EndIndex;

            $("a[name='playerLink']").click(function () {
                $('#waiting-div').show();
            });

            $("#loadBtn").click(function () {
                startIndex += 5;
                endIndex += 5;
                $('#waiting-div').show();
                $.ajax({
                    url: "/Summoner/_MatchHistory",
                    type: "POST",
                    data: { accountId: "@Model.Summoner.AccountId", startIndex: startIndex, endIndex: endIndex },
                    success: function(data) {
                        $("#matchHistory").append(data);
                        $('#waiting-div').hide();
                    }
                });
            });
        });
    </script>
}
